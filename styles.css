:root{
  --ink:#0a1f33;
  --text:#32475c;
  --blue:#2b8cff;
  --blue-dark:#1047a8;
  --panel:#ffffff;
  --hair:rgba(16,71,168,.14);
  --shadow-big:0 25px 80px rgba(0,0,0,.12);
  --page-x:8vw;
}

/* БАЗА */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:#fff;}
main{display:block}

/* ШАПКА */
.topbar{position:sticky;top:0;z-index:20;display:flex;align-items:center;justify-content:space-between;padding:18px var(--page-x);background:#fff;border-bottom:1px solid rgba(0,0,0,.06)}
.logo{font-family:Impact,Haettenschweiler,'Arial Black',sans-serif;font-size:44px}
.topbar nav a{color:var(--ink);text-decoration:none;margin-left:28px;font-weight:600;transition:opacity .2s}
.topbar nav a:hover{opacity:.75}

/* HERO */
.hero{background:var(--blue);color:#fff;min-height:72vh;display:grid;place-items:center;gap:28px;padding:72px 0 96px}
.capsule{background:var(--panel);border-radius:999px;width:min(1000px,85vw);height:min(460px,58vh);display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow-big)}
.odo{display:flex;gap:8px;align-items:center}
.digit{position:relative;overflow:hidden;border-radius:12px;width:clamp(56px,7vw,96px);height:clamp(98px,15vw,170px)}
.strip{position:absolute;inset:0;display:flex;flex-direction:column}
.cell{height:100%;display:flex;align-items:center;justify-content:center;font-family:Impact,Haettenschweiler,'Arial Black',sans-serif;font-size:clamp(68px,13vw,160px);color:var(--ink)}
.digit.anim .strip{transition:transform .45s cubic-bezier(.25,.8,.25,1)}
.subtitle{max-width:980px;text-align:center;color:#fff;font-family:Impact,Haettenschweiler,'Arial Black',sans-serif;font-size:clamp(20px,2.4vw,30px);line-height:1.35}

/* REVEAL */
.reveal{opacity:0;transform:translateY(16px);transition:opacity .7s ease,transform .7s cubic-bezier(.2,.7,.2,1)}
.reveal.visible{opacity:1;transform:translateY(0)}

/* WHY */
.why{position:relative;overflow:hidden;padding:120px var(--page-x) 140px;background:#fff}
.why h2{position:relative;z-index:2;font-family:Impact,Haettenschweiler,'Arial Black',sans-serif;font-size:clamp(40px,5.2vw,76px);margin-bottom:14px}
.why p{position:relative;z-index:2;color:var(--text);max-width:980px;line-height:1.65;font-size:clamp(18px,2vw,22px)}
#bottleCanvas{position:absolute;inset:0;z-index:0;pointer-events:none}  /* строго за текстом */

/* PRODUCTS */
.products{padding:120px var(--page-x);text-align:center;background:#fff}
.products h2{font-family:Impact,Haettenschweiler,'Arial Black',sans-serif;font-size:clamp(36px,5vw,72px)}
.subtitle-small{color:var(--text);font-size:clamp(18px,2vw,22px);margin:8px 0 60px}
.cards-wrapper{display:grid;grid-template-columns:repeat(2,minmax(280px,1fr));gap:40px;width:100%;max-width:1000px;margin:0 auto}
.card{background:linear-gradient(180deg,#f8fbff 0%,#e8f1ff 100%);border-radius:28px;padding:40px 32px;box-shadow:0 10px 30px rgba(0,0,0,.05);transition:transform .3s ease, box-shadow .3s ease;text-align:left;position:relative;overflow:hidden}
.card:hover{transform:translateY(-6px);box-shadow:0 16px 40px rgba(43,140,255,.18)}
.card-icon{font-size:38px;margin-bottom:18px}
.card h3{font-family:Impact,Haettenschweiler,'Arial Black',sans-serif;font-size:22px;color:var(--ink);margin-bottom:10px}
.card p{font-size:17px;color:var(--text);line-height:1.5}

/* MOBILE SLIDER */
@media (max-width: 768px){
  .products{padding:90px 4vw}
  .cards-wrapper{display:flex;overflow-x:auto;scroll-snap-type:x mandatory;gap:24px;padding-bottom:10px;-webkit-overflow-scrolling:touch}
  .card{flex:0 0 85%;scroll-snap-align:center;text-align:center;padding:32px}
  .card h3{font-size:20px}
  .card p{font-size:15px}
}

/* TECH */
.tech{position:relative;overflow:hidden;padding:120px var(--page-x) 140px;background:#fff}
.tech h2{font-family:Impact,Haettenschweiler,'Arial Black',sans-serif;font-size:clamp(40px,5.2vw,76px);margin-bottom:12px}
.lead{color:var(--text);max-width:900px;line-height:1.65;font-size:clamp(18px,2vw,22px);margin-bottom:24px}

.pipeline{display:block}
.pipe-wrap{position:relative}
.pipe-svg{width:100%;filter:drop-shadow(0 12px 28px rgba(16,71,168,.12))}
@keyframes flowMove{to{stroke-dashoffset:-520}}
#flow{animation:flowMove 3.4s linear infinite}

/* ПУЛЬСИРУЮЩИЕ ТОЧКИ */
.stage-dot{
  position:absolute; left:var(--x); top:var(--y); transform:translate(-50%,-50%);
  width:26px;height:26px;border-radius:50%;
  background:var(--blue);border:3px solid #fff;
  box-shadow:0 0 12px rgba(43,140,255,.6);
  cursor:pointer; z-index:3;
  animation:pulse 1.8s ease-in-out infinite;
}
.stage-dot.active{background:#0f56cf}
@keyframes pulse{
  0%,100%{box-shadow:0 0 10px rgba(43,140,255,.6), 0 0 0 0 rgba(43,140,255,.35)}
  50%{box-shadow:0 0 18px rgba(43,140,255,.9), 0 0 0 10px rgba(43,140,255,.0)}
}

/* ВСПЛЫВАЮЩЕЕ ОКНО ЭТАПА */
.stage-info{
  position:absolute; left:50%; top:50%; transform:translate(-50%,-130%); /* дефолт, затем переопределяем в JS */
  min-width:240px; max-width:320px; padding:12px 14px;
  background:rgba(11,31,51,.95); color:#fff; border-radius:12px;
  box-shadow:0 12px 28px rgba(0,0,0,.25); z-index:4;
}
.stage-info h3{font-family:Impact,Haettenschweiler,'Arial Black',sans-serif;font-size:18px;margin-bottom:6px}
.stage-info p{font-size:13px;line-height:1.5;color:#e7eef8}

/* SOLUTIONS */
.solutions{position:relative;padding:120px var(--page-x) 140px;background:#fff}
.solutions h2{font-family:Impact,Haettenschweiler,'Arial Black',sans-serif;font-size:clamp(40px,5.2vw,76px);margin-bottom:12px}
.solutions .lead{color:var(--text);font-size:clamp(18px,2vw,22px);line-height:1.65}

/* АДАПТИВ ДОПОЛНИТЕЛЬНО */
@media(max-width:900px){
  .hero{padding:64px 0 88px}
}
@media(max-width:420px){
  .digit{width:46px;height:96px}
  .cell{font-size:64px}
  .capsule{width:88vw;height:46vh}
}
