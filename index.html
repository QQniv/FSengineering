<!doctype html>
<html lang="ru" class="no-js">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FS ‚Ä¢ –ß–∏—Å—Ç–∞—è –≤–æ–¥–∞ –±—É–¥—É—â–µ–≥–æ</title>
<style>
:root{
  --ink:#0a1f33; --text:#32475c; --blue:#2b8cff; --blue-dark:#1047a8; --panel:#ffffff;
  --shadow-big:0 25px 80px rgba(0,0,0,.12); --page-x:8vw;
  /* –Ω–µ–∂–Ω—ã–π –ø–∞—Ä–∞–ª–ª–∞–∫—Å */
  --parallax-strength: 0.18;
}
@media (max-width:900px){ :root{ --parallax-strength: 0.12; } }
@media (prefers-reduced-motion:reduce){ :root{ --parallax-strength: 0; } }

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:#fff;overflow-x:hidden}

/* no-js fallback: –±–ª–æ–∫–∏ –≤–∏–¥–∏–º—ã, –±–µ–∑ ¬´reveal¬ª */
.no-js .reveal{opacity:1 !important; transform:none !important}

/* header */
.topbar{position:sticky;top:0;z-index:20;display:flex;align-items:center;justify-content:space-between;padding:18px var(--page-x);background:#fff;border-bottom:1px solid rgba(0,0,0,.06)}
.logo{font-family:Impact,Haettenschweiler,'Arial Black',sans-serif;font-size:44px}
nav a{text-decoration:none;color:var(--ink);margin-left:28px;font-weight:600;transition:opacity .2s}
nav a:hover{opacity:.75}

/* hero (counter) */
.hero{background:var(--blue);color:#fff;min-height:72vh;display:grid;place-items:center;gap:28px;padding:72px 0 140px}
.capsule{position:relative;background:var(--panel);border-radius:999px;width:min(1000px,85vw);height:min(460px,58vh);display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow-big)}
.capsule::after{content:"";position:absolute;inset:0;border-radius:inherit;background:linear-gradient(100deg,rgba(255,255,255,0) 0%,rgba(255,255,255,.22) 50%,rgba(255,255,255,0) 100%);transform:translateX(-100%);animation:shine 7s linear infinite}
@keyframes shine{to{transform:translateX(100%)}}
.odo{display:flex;gap:8px}
.digit{position:relative;overflow:hidden;border-radius:12px;width:clamp(56px,7vw,96px);height:clamp(98px,15vw,170px);background:transparent;transform:scaleY(-1)}
.strip{position:absolute;inset:0;display:flex;flex-direction:column;will-change:transform}
.cell{height:100%;display:flex;align-items:center;justify-content:center;font-family:Impact,Haettenschweiler,'Arial Black',sans-serif;font-size:clamp(68px,13vw,160px);color:var(--ink);transform:scaleY(-1)}
.digit.anim .strip{transition:transform .55s cubic-bezier(.22,.8,.18,1)}
.digit[data-i="0"].anim .strip{transition-delay:.00s}
.digit[data-i="1"].anim .strip{transition-delay:.02s}
.digit[data-i="2"].anim .strip{transition-delay:.04s}
.digit[data-i="3"].anim .strip{transition-delay:.06s}
.digit[data-i="4"].anim .strip{transition-delay:.08s}
.digit[data-i="5"].anim .strip{transition-delay:.10s}
.subtitle{max-width:980px;text-align:center;color:#fff;font-family:Impact,Haettenschweiler,'Arial Black',sans-serif;font-size:clamp(20px,2.4vw,30px);line-height:1.35}

/* reveal + parallax */
.reveal{opacity:0;--rvY:22px;--pY:0px;transform:translateY(calc(var(--rvY) + var(--pY)));transition:opacity .8s ease,transform .8s ease}
.reveal.visible{opacity:1;--rvY:0px}
[data-parallax]{will-change:transform}

/* section spacing */
section{scroll-margin-top:84px}
.sp-top{margin-top:84px}
.sp-between{margin-bottom:96px}

/* why (falling bottles) */
.why{position:relative;overflow:hidden;padding:120px var(--page-x) 140px;background:#fff;text-align:center}
.why h2{position:relative;z-index:2;font-family:Impact,Haettenschweiler,'Arial Black',sans-serif;font-size:clamp(40px,5.2vw,76px);margin-bottom:14px}
.why p{position:relative;z-index:2;color:var(--text);max-width:980px;margin:0 auto;line-height:1.65;font-size:clamp(18px,2vw,22px)}
#bottleCanvas{position:absolute;inset:0;z-index:0;pointer-events:none}
/* .motion-btn —É–¥–∞–ª–µ–Ω–∞ */

/* products */
.products{padding:120px var(--page-x);text-align:center;background:#fff}
.products h2{font-family:Impact,Haettenschweiler,'Arial Black',sans-serif;font-size:clamp(36px,5vw,72px)}
.subtitle-small{color:var(--text);font-size:clamp(18px,2vw,22px);margin:8px 0 60px}

/* —Å—Å—ã–ª–∫–∏-–∫–∞—Ä—Ç–æ—á–∫–∏ –≤–µ–¥—É—Ç –Ω–∞ services.html#... */
.cards-wrapper{display:grid;grid-template-columns:repeat(2,minmax(280px,1fr));gap:40px;max-width:1000px;margin:0 auto}
.card{display:block;text-decoration:none;color:inherit;background:linear-gradient(180deg,#f8fbff 0%,#e8f1ff 100%);border-radius:28px;padding:40px 32px;box-shadow:0 10px 30px rgba(0,0,0,.05);transition:transform .3s ease, box-shadow .3s ease;text-align:left}
.card:hover{transform:translateY(-6px);box-shadow:0 16px 40px rgba(43,140,255,.18)}
.card-icon{font-size:38px;margin-bottom:18px}
.card h3{font-family:Impact,Haettenschweiler,'Arial Black',sans-serif;font-size:22px;color:var(--ink);margin-bottom:10px}
.card p{font-size:17px;color:var(--text);line-height:1.5}

/* –º–æ–±–∏–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª ‚Äî –¢–û–õ–¨–ö–û –≤–±–æ–∫ */
@media (max-width:768px){
  .cards-wrapper{
    display:flex; overflow-x:auto; scroll-snap-type:x mandatory; gap:24px; padding-bottom:10px;
    -webkit-overflow-scrolling:touch; touch-action: pan-x; overscroll-behavior-x: contain;
  }
  .cards-wrapper *{touch-action:pan-x}
  .card{flex:0 0 85%; scroll-snap-align:center; text-align:center; padding:32px}
}

/* tech (pipe) */
.tech{position:relative;overflow:hidden;padding:120px var(--page-x) 140px;background:#fff}
.tech h2{font-family:Impact,Haettenschweiler,'Arial Black',sans-serif;font-size:clamp(40px,5.2vw,76px);margin-bottom:12px}
.lead{color:var(--text);max-width:900px;line-height:1.65;font-size:clamp(18px,2vw,22px);margin:0 auto 24px;text-align:center}
.pipe-wrap{position:relative}
.pipe-svg{width:100%;filter:drop-shadow(0 12px 28px rgba(16,71,168,.12))}
@keyframes flowLeftToRight{from{stroke-dashoffset:520}to{stroke-dashoffset:0}}
#flow{animation:flowLeftToRight 5s linear infinite}
.stage-dot{position:absolute;left:var(--x);top:var(--y);transform:translate(-50%,-50%);width:26px;height:26px;border-radius:50%;background:var(--blue);border:3px solid #fff;box-shadow:0 0 12px rgba(43,140,255,.6);cursor:pointer;z-index:3;animation:pulse 1.8s ease-in-out infinite}
.stage-dot.active{background:#0f56cf}
@keyframes pulse{0%,100%{box-shadow:0 0 10px rgba(43,140,255,.6),0 0 0 0 rgba(43,140,255,.35)}50%{box-shadow:0 0 18px rgba(43,140,255,.9),0 0 0 10px rgba(43,140,255,0)}}
.stage-info{position:absolute;left:50%;top:50%;transform:translate(-50%,-130%);min-width:240px;max-width:320px;padding:12px 14px;background:rgba(11,31,51,.95);color:#fff;border-radius:12px;box-shadow:0 12px 28px rgba(0,0,0,.25);z-index:4}
.stage-info h3{font-family:Impact,Haettenschweiler,'Arial Black',sans-serif;font-size:18px;margin-bottom:6px}
.stage-info p{font-size:13px;line-height:1.5;color:#e7eef8}
</style>
</head>
<body>
<header class="topbar">
  <div class="logo">FS</div>
  <nav>
    <a href="#about">–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ</a>
    <a href="#tech">–ö–∞–∫ –æ—á–∏—â–∞–µ–º –≤–æ–¥—É</a>
    <a href="services.html">–£—Å–ª—É–≥–∏</a>
  </nav>
</header>

<main>
  <!-- HERO / COUNTER -->
  <section class="hero sp-between" id="hero">
    <div class="capsule reveal" data-parallax="0.03">
      <div id="odo" class="odo" aria-live="polite"></div>
    </div>
    <h1 class="subtitle reveal" data-parallax="0.04">
      –ò–º–µ–Ω–Ω–æ —Å—Ç–æ–ª—å–∫–æ —Ç—ã—Å—è—á –ø–ª–∞—Å—Ç–∏–∫–æ–≤—ã—Ö –±—É—Ç—ã–ª–æ–∫ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ –†–æ—Å—Å–∏–∏, –ø–æ–∫–∞ –≤—ã –∑–¥–µ—Å—å
    </h1>
  </section>

  <!-- WHY -->
  <section class="why sp-top sp-between" id="about" aria-labelledby="why-title">
    <canvas id="bottleCanvas" aria-hidden="true"></canvas>
    <h2 id="why-title" class="reveal" data-parallax="0.03">–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ</h2>
    <p class="reveal" data-parallax="0.04">
      –ö–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É ‚Äî —Ç—ã—Å—è—á–∏ –ø–ª–∞—Å—Ç–∏–∫–æ–≤—ã—Ö –±—É—Ç—ã–ª–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å—á–µ–∑–Ω—É—Ç.
      FS —Å–æ–∑–¥–∞—ë—Ç —Å–∏—Å—Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ—á–∏—â–∞—é—Ç –≤–æ–¥—É –∏ —É–º–µ–Ω—å—à–∞—é—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Ö–æ–¥–æ–≤, –≤–æ–∑–≤—Ä–∞—â–∞—è –ø—Ä–∏—Ä–æ–¥–µ —Ç–æ, —á—Ç–æ –µ–π –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç.
    </p>
    <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∫–ª–æ–Ω–∞ —É–¥–∞–ª–µ–Ω–∞ -->
  </section>

  <!-- PRODUCTS -->
  <section class="products sp-between" id="products">
    <h2 class="reveal" data-parallax="0.02">–ß—Ç–æ –¥–µ–ª–∞–µ—Ç FS</h2>
    <p class="subtitle-small reveal" data-parallax="0.03">–°–∏—Å—Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ—á–∏—â–∞—é—Ç –≤–æ–¥—É ‚Äî –∏ –∑–∞–±–æ—Ç—è—Ç—Å—è –æ –±—É–¥—É—â–µ–º.</p>
    <div class="cards-wrapper">
      <a class="card reveal" data-parallax="0.02" href="services.html#houses">
        <div class="card-icon">üè†</div>
        <h3>–§–∏–ª—å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã<br>–¥–ª—è —á–∞—Å—Ç–Ω—ã—Ö –¥–æ–º–æ–≤</h3>
        <p>–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö –¥–æ–º–æ–≤ –∏ –∫–æ—Ç—Ç–µ–¥–∂–µ–π.</p>
      </a>
      <a class="card reveal" data-parallax="0.02" href="services.html#developers">
        <div class="card-icon">üèóÔ∏è</div>
        <h3>–°–∏—Å—Ç–µ–º—ã –≤–æ–¥–æ–æ—á–∏—Å—Ç–∫–∏<br>–¥–ª—è –¥–µ–≤–µ–ª–æ–ø–µ—Ä–æ–≤</h3>
        <p>–ü—Ä–æ–µ–∫—Ç—ã ‚Äî –æ—Ç –∫–≤–∞—Ä—Ç–∞–ª–æ–≤ –¥–æ –±–∏–∑–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä–æ–≤.</p>
      </a>
      <a class="card reveal" data-parallax="0.02" href="services.html#apartments">
        <div class="card-icon">üè¢</div>
        <h3>–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è<br>–¥–ª—è –∫–≤–∞—Ä—Ç–∏—Ä</h3>
        <p>–§–∏–ª—å—Ç—Ä—ã —Å –∞–¥–∞–ø—Ç–∞—Ü–∏–µ–π –ø–æ–¥ —Ç–∏–ø –≤–æ–¥–æ—Å–Ω–∞–±–∂–µ–Ω–∏—è.</p>
      </a>
      <a class="card reveal" data-parallax="0.02" href="services.html#service">
        <div class="card-icon">üîß</div>
        <h3>–°–µ—Ä–≤–∏—Å –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ</h3>
        <p>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞ –∏ –∑–∞–º–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ –≥—Ä–∞—Ñ–∏–∫—É.</p>
      </a>
    </div>
  </section>

  <!-- TECH -->
  <section class="tech sp-between" id="tech" aria-labelledby="tech-title">
    <h2 id="tech-title" class="reveal" data-parallax="0.02">–ö–∞–∫ –º—ã –æ—á–∏—â–∞–µ–º –≤–æ–¥—É</h2>
    <p class="lead reveal" data-parallax="0.03">
      –ü–æ—Ç–æ–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—è—Ç—å —Å—Ç–∞–¥–∏–π: <b>–≥—Ä—É–±–∞—è</b> ‚Üí <b>—Å–æ—Ä–±—Ü–∏—è</b> ‚Üí <b>–º–µ–º–±—Ä–∞–Ω–∞</b> ‚Üí <b>–º–∏–Ω–µ—Ä–∞–ª–∏–∑–∞—Ü–∏—è</b> ‚Üí <b>–£–§</b>.
      –ù–∞–∂–º–∏ –Ω–∞ –ø—É–ª—å—Å–∏—Ä—É—é—â–∏–µ —Ç–æ—á–∫–∏.
    </p>

    <div class="pipe-wrap">
      <svg class="pipe-svg reveal" data-parallax="0.02" viewBox="0 0 1200 220" preserveAspectRatio="xMidYMid meet">
        <defs>
          <linearGradient id="tubeGrad" x1="0" x2="1" y1="0" y2="0">
            <stop offset="0" stop-color="#eaf1ff"/><stop offset="1" stop-color="#dbe7ff"/>
          </linearGradient>
          <linearGradient id="waterGrad" x1="0" x2="1" y1="0" y2="0">
            <stop offset="0" stop-color="#1047a8"/><stop offset="1" stop-color="#2b8cff"/>
          </linearGradient>
        </defs>
        <path d="M 40 110 H 360 C 410 110, 410 40, 460 40 H 600 C 650 40, 650 180, 700 180 H 860 C 910 180, 910 110, 960 110 H 1160"
              fill="none" stroke="url(#tubeGrad)" stroke-width="36" stroke-linecap="round" stroke-linejoin="round"/>
        <path id="flow"
              d="M 40 110 H 360 C 410 110, 410 40, 460 40 H 600 C 650 40, 650 180, 700 180 H 860 C 910 180, 910 110, 960 110 H 1160"
              fill="none" stroke="url(#waterGrad)" stroke-width="16"
              stroke-dasharray="90 430" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>

      <button class="stage-dot" style="--x:24%;--y:50%;" data-title="–ì—Ä—É–±–∞—è –æ—á–∏—Å—Ç–∫–∞" data-text="–£–¥–∞–ª—è–µ—Ç –ø–µ—Å–æ–∫ –∏ —Ä–∂–∞–≤—á–∏–Ω—É."></button>
      <button class="stage-dot" style="--x:46%;--y:20%;" data-title="–°–æ—Ä–±—Ü–∏—è" data-text="–£–≥–æ–ª—å —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –∑–∞–ø–∞—Ö –∏ —Ö–ª–æ—Ä."></button>
      <button class="stage-dot" style="--x:63%;--y:83%;" data-title="–ú–µ–º–±—Ä–∞–Ω–∞" data-text="–£–¥–∞–ª—è–µ—Ç —Å–æ–ª–∏ –∏ –±–∞–∫—Ç–µ—Ä–∏–∏."></button>
      <button class="stage-dot" style="--x:74%;--y:68%;" data-title="–ú–∏–Ω–µ—Ä–∞–ª–∏–∑–∞—Ü–∏—è" data-text="–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–µ–∑–Ω—ã–µ –º–∏–Ω–µ—Ä–∞–ª—ã (Ca, Mg)."></button>
      <button class="stage-dot" style="--x:84%;--y:51%;" data-title="–£–§" data-text="–û–±–µ–∑–∑–∞—Ä–∞–∂–∏–≤–∞–Ω–∏–µ —É–ª—å—Ç—Ä–∞—Ñ–∏–æ–ª–µ—Ç–æ–º."></button>

      <div class="stage-info" id="stageInfo" hidden>
        <h3 id="stageTitle"></h3><p id="stageText"></p>
      </div>
    </div>
  </section>
</main>

<script>
/* —Å–Ω—è—Ç—å no-js –∫–∞–∫ –º–æ–∂–Ω–æ —Ä–∞–Ω—å—à–µ */
document.documentElement.classList.remove('no-js');
document.documentElement.classList.add('js');
</script>

<script>
/* –≤—Å–µ–≥–¥–∞ —Å—Ç–∞—Ä—Ç—É–µ–º —Å–æ —Å—á—ë—Ç—á–∏–∫–∞ */
(function(){
  const forceTop=()=>{scrollTo(0,0);document.documentElement.scrollTop=0;document.body.scrollTop=0;}
  if('scrollRestoration' in history) history.scrollRestoration='manual';
  if(!location.hash) forceTop();
  addEventListener('load',forceTop); addEventListener('pageshow',forceTop);
})();

/* —Å—á—ë—Ç—á–∏–∫: +6 —Ç—ã—Å/—Å–µ–∫, –≤–∏–∑—É–∞–ª—å–Ω–æ —Å–≤–µ—Ä—Ö—É-–≤–Ω–∏–∑ */
(function(){
  const BOTTLES_PER_SEC=6000,DIGITS=6,STEP=0.1;
  const odo=document.getElementById('odo');
  function makeDigit(i){const d=document.createElement('div');d.className='digit';d.dataset.i=i;const s=document.createElement('div');s.className='strip';for(let k=0;k<10;k++){const c=document.createElement('div');c.className='cell';c.textContent=k;s.appendChild(c)}const ex=document.createElement('div');ex.className='cell';ex.textContent='0';s.appendChild(ex);d.appendChild(s);return d}
  function build(){odo.innerHTML='';for(let i=0;i<DIGITS;i++)odo.appendChild(makeDigit(i))}
  build();
  let cellH=0;function measure(){const s=odo.querySelector('.cell');if(s)cellH=Math.round(s.getBoundingClientRect().height)};measure();addEventListener('resize',()=>{measure();setNumber(cnt)})
  let prev=Array(DIGITS).fill(0),cnt=0;
  function setNumber(n){const nInt=Math.max(0,Math.floor(n));const str=nInt.toString().padStart(DIGITS,'0');const strips=odo.querySelectorAll('.digit .strip');for(let i=0;i<DIGITS;i++){const d=+str[i];if(d!==prev[i]){const y=-cellH*d;const st=strips[i];st.parentElement.classList.add('anim');st.style.transform=`translate3d(0,${y}px,0)`}}prev=str.split('').map(Number)}
  let acc=0,last=performance.now();function loop(now){const dt=(now-last)/1000;last=now;acc+=(BOTTLES_PER_SEC*dt)/1000;while(acc>=STEP){acc-=STEP;cnt+=STEP;setNumber(cnt)}requestAnimationFrame(loop)}requestAnimationFrame(loop);
})();

/* –ø–∞—Ä–∞–ª–ª–∞–∫—Å */
(function(){
  const els=[...document.querySelectorAll('[data-parallax]')];
  const getK=()=>parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--parallax-strength'))||0;
  const update=()=>{
    const vh=innerHeight, k=getK();
    for(const el of els){
      const sp=parseFloat(el.dataset.parallax||'0');
      if(!sp || !k){ el.style.setProperty('--pY','0px'); continue; }
      const r=el.getBoundingClientRect();
      const max=14;
      const raw=(r.top - vh*0.5) * sp * k;
      const y=Math.max(-max, Math.min(max, raw));
      el.style.setProperty('--pY', `${y}px`);
    }
  };
  let ticking=false;
  const onScroll=()=>{ if(!ticking){ ticking=true; requestAnimationFrame(()=>{ ticking=false; update(); }); } };
  update(); addEventListener('scroll',onScroll,{passive:true}); addEventListener('resize',onScroll,{passive:true});
})();

/* reveal ‚Äî –∑–∞–ø—É—Å–∫–∞–µ–º –î–û ¬´–±—É—Ç—ã–ª–æ–∫¬ª, —á—Ç–æ–±—ã —Å–∞–π—Ç –Ω–µ "–∏—Å—á–µ–∑–∞–ª" –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –Ω–∏–∂–µ */
(function(){
  const els=document.querySelectorAll('.reveal');
  const io=new IntersectionObserver(es=>{
    es.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('visible'); io.unobserve(e.target); } });
  },{threshold:.25});
  els.forEach(el=>io.observe(el));
})();
</script>

<script>
/* –ë–£–¢–´–õ–ö–ò: –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ, –±–µ–∑ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è, –±–æ–ª–µ–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ
   –°–ò–õ–£–≠–¢ ‚Äî –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π: –∏–∑—è—â–Ω—ã–µ ¬´–ø–ª–µ—á–∏¬ª, —É–∑–∫–æ–µ –≥–æ—Ä–ª—ã—à–∫–æ –∏ –∫—Ä—ã—à–∫–∞. */
(function(){
  try{
    const section=document.getElementById('about'); if(!section) return;
    const canvas=document.getElementById('bottleCanvas'); const ctx=canvas.getContext('2d');

    let W=0,H=0,dpr=1,running=false; let items=[];
    const MAX_DPR=2;

    function resize(){
      const r=section.getBoundingClientRect();
      dpr=Math.min(window.devicePixelRatio||1, MAX_DPR);
      W=Math.max(320, Math.floor(r.width));
      H=Math.max(280, Math.floor(r.height));
      canvas.width=W*dpr; canvas.height=H*dpr;
      canvas.style.width=W+'px'; canvas.style.height=H+'px';
      ctx.setTransform(dpr,0,0,dpr,0,0);
      seed();
    }

    // –ö–õ–ê–°–°–ò–ß–ï–°–ö–ò–ô —Å–ø—Ä–∞–π—Ç –±—É—Ç—ã–ª–∫–∏: –∫–æ—Ä–ø—É—Å + –ø–ª–µ—á–∏ + –≥–æ—Ä–ª—ã—à–∫–æ + –∫—Ä—ã—à–∫–∞ + –±–ª–∏–∫
    function bottleSpriteClassic(size=124, alpha=0.085){
      const cn=document.createElement('canvas'); cn.width=cn.height=size;
      const c=cn.getContext('2d');
      c.save();
      c.translate(size/2,size/2);
      c.rotate(-Math.PI/2.18);   // –ª—ë–≥–∫–∏–π –Ω–∞–∫–ª–æ–Ω

      // –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–æ—Ä–º—ã
      const bodyW = size*0.62;   // —à–∏—Ä–∏–Ω–∞ –∫–æ—Ä–ø—É—Å–∞
      const bodyH = size*0.66;   // –≤—ã—Å–æ—Ç–∞ –∫–æ—Ä–ø—É—Å–∞ (–Ω–µ –≤—Å—è –±—É—Ç—ã–ª–∫–∞)
      const neckW = bodyW*0.28;  // —à–∏—Ä–∏–Ω–∞ –≥–æ—Ä–ª—ã—à–∫–∞
      const neckH = bodyH*0.24;  // –≤—ã—Å–æ—Ç–∞ –≥–æ—Ä–ª—ã—à–∫–∞
      const capH  = bodyH*0.10;  // –≤—ã—Å–æ—Ç–∞ –∫—Ä—ã—à–∫–∏
      const rBody = bodyH*0.26;  // —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è –∫–æ—Ä–ø—É—Å–∞

      const x = -bodyW/2, y = -bodyH/2;

      // –¢–ï–ù–¨
      c.globalAlpha = Math.min(alpha*1.2, 0.12);
      c.fillStyle='rgba(0,0,0,0.06)';
      c.beginPath();
      c.ellipse(0, bodyH*0.50, bodyW*0.46, bodyH*0.18, 0, 0, Math.PI*2);
      c.fill();

      // –ö–û–†–ü–£–° (—Å–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–π –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫)
      c.globalAlpha = alpha;
      c.fillStyle = '#3a86ff';
      c.beginPath();
      roundRectPath(c, x, y, bodyW, bodyH, rBody);
      c.fill();

      // –ü–õ–ï–ß–ò ‚Üí –ì–û–†–õ–´–®–ö–û (–ø–ª–∞–≤–Ω–∞—è ¬´—Å—É–∂–∞—é—â–∞—è—Å—è¬ª —Ñ–æ—Ä–º–∞)
      c.beginPath();
      const shoulderY = y;                    // –≤–µ—Ä—Ö –∫–æ—Ä–ø—É—Å–∞
      const neckTopY  = shoulderY - neckH;    // –≤–µ—Ä—Ö –≥–æ—Ä–ª—ã—à–∫–∞ (–Ω–∏–∑ –∫—Ä—ã—à–∫–∏)
      // –ø—Ä–∞–≤–∞—è –ø–æ–ª–æ–≤–∏–Ω–∞ –ø–ª–µ—á–∞
      c.moveTo( bodyW/2, shoulderY );
      c.bezierCurveTo(
        bodyW/2, shoulderY - bodyH*0.14,     // –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è –≤–Ω–∏–∑-–≤–≤–µ—Ä—Ö
        neckW/2 + bodyW*0.06, shoulderY - bodyH*0.22,
        neckW/2, neckTopY
      );
      // –∫—Ä—ã—à–∫–∞ –≤–µ—Ä—Ö–æ–º –≤–ø—Ä–∞–≤–æ
      c.lineTo( neckW/2, neckTopY - capH );
      // –≤–µ—Ä—Ö –∫—Ä—ã—à–∫–∏ –ø–æ –ø—Ä—è–º–æ–π –≤–ª–µ–≤–æ
      c.lineTo( -neckW/2, neckTopY - capH );
      // –ª–µ–≤–∞—è –ø–æ–ª–æ–≤–∏–Ω–∞ –ø–ª–µ—á–∞ —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ
      c.lineTo( -neckW/2, neckTopY );
      c.bezierCurveTo(
        -neckW/2 - bodyW*0.06, shoulderY - bodyH*0.22,
        -bodyW/2, shoulderY - bodyH*0.14,
        -bodyW/2, shoulderY
      );
      c.closePath();
      c.fillStyle = '#3a86ff';
      c.fill();

      // –û—Ç—Ç–µ–Ω–æ–∫-–∫–æ–ª—å—Ü–æ –Ω–∞ –∫—Ä—ã—à–∫–µ
      c.globalAlpha = alpha*0.95;
      c.fillStyle = '#0e3e9b';
      c.fillRect(-neckW*0.5, neckTopY - capH, neckW, capH*0.42);
      // –ö—Ä—ã—à–∫–∞ (—á—É—Ç—å —Å–≤–µ—Ç–ª–µ–µ –≥—Ä–∞–Ω—å)
      c.fillStyle = '#1655cf';
      c.fillRect(-neckW*0.45, neckTopY - capH, neckW*0.9, capH*0.28);

      // –≠–¢–ò–ö–ï–¢–ö–ê
      c.globalAlpha = alpha*0.75;
      c.fillStyle   = '#1e56c5';
      const labelW = bodyW*0.38, labelH = bodyH*0.16;
      roundRectPath(c, -labelW/2, y + bodyH*0.06, labelW, labelH, labelH*0.35);
      c.fill();

      // –ë–õ–ò–ö
      c.globalAlpha = alpha*0.7;
      c.fillStyle = '#ffffff';
      c.beginPath();
      c.roundRect
        ? c.roundRect(x + bodyW*0.08, y + bodyH*0.10, bodyW*0.14, bodyH*0.36, bodyH*0.08)
        : roundRectPath(c, x + bodyW*0.08, y + bodyH*0.10, bodyW*0.14, bodyH*0.36, bodyH*0.08);
      c.fill();

      c.restore();
      return cn;

      // helper
      function roundRectPath(ctx,x,y,w,h,r){
        r=Math.max(0,Math.min(r, Math.min(w,h)/2));
        ctx.moveTo(x+r,y);
        ctx.arcTo(x+w,y,  x+w,y+h, r);
        ctx.arcTo(x+w,y+h, x,y+h, r);
        ctx.arcTo(x,y+h,   x,y,   r);
        ctx.arcTo(x,y,     x+w,y, r);
        ctx.closePath();
      }
    }

    <script>
/* === –°–ü–†–ê–ô–¢ –ë–£–¢–´–õ–ö–ò –ø–æ–¥ —Ç–≤–æ–π —Ä–µ—Ñ–µ—Ä–µ–Ω—Å === */
function bottleSpriteFS(size=124, alpha=0.085){
  const cn=document.createElement('canvas'); cn.width=cn.height=size;
  const c=cn.getContext('2d');

  // helper: roundRect fallback
  function rrPath(ctx,x,y,w,h,r){
    r=Math.max(0,Math.min(r,Math.min(w,h)/2));
    ctx.moveTo(x+r,y);
    ctx.arcTo(x+w,y,  x+w,y+h, r);
    ctx.arcTo(x+w,y+h, x,y+h, r);
    ctx.arcTo(x,y+h,   x,y,   r);
    ctx.arcTo(x,y,     x+w,y, r);
    ctx.closePath();
  }
  function rr(ctx,x,y,w,h,r){
    if(ctx.roundRect) ctx.roundRect(x,y,w,h,r);
    else rrPath(ctx,x,y,w,h,r);
  }

  c.save();
  c.translate(size/2,size/2);
  c.rotate(-0.45); // –ª—ë–≥–∫–∏–π –¥–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–π –Ω–∞–∫–ª–æ–Ω –∫–∞–∫ –Ω–∞ —Å–∫—Ä–∏–Ω–µ

  const bodyW=size*0.62;
  const bodyH=size*0.66;
  const neckW=bodyW*0.44;       // –∫–æ—Ä–æ—Ç–∫–æ–µ –∏ —à–∏—Ä–æ–∫–æ–µ –≥–æ—Ä–ª—ã—à–∫–æ
  const neckH=bodyH*0.18;
  const capH =bodyH*0.12;
  const rBody=bodyW*0.22;

  const x=-bodyW/2, y=-bodyH/2;

  // —Ç–µ–Ω—å
  c.globalAlpha=Math.min(alpha*1.3,0.12);
  c.fillStyle='rgba(0,0,0,0.06)';
  c.beginPath();
  c.ellipse(0, bodyH*0.52, bodyW*0.46, bodyH*0.18, 0, 0, Math.PI*2);
  c.fill();

  // –∫–æ—Ä–ø—É—Å (–ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ —Å –±–æ–ª—å—à–∏–º–∏ —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è–º–∏ ‚Äî ¬´–ø–ª–æ—Å–∫–∏–µ –ø–ª–µ—á–∏¬ª)
  c.globalAlpha=alpha;
  c.fillStyle='#3a86ff';
  c.beginPath(); rr(c, x, y, bodyW, bodyH, rBody); c.fill();

  // –ø–ª–µ—á–∏ + –≥–æ—Ä–ª—ã—à–∫–æ (–ª—ë–≥–∫–æ–µ —Å—É–∂–µ–Ω–∏–µ)
  c.beginPath();
  const neckTopY = y - neckH;
  c.moveTo( bodyW/2, y + bodyH*0.02);
  c.lineTo( neckW/2, y );
  c.lineTo( neckW/2*0.95, neckTopY );
  c.lineTo( -neckW/2*0.95, neckTopY );
  c.lineTo( -neckW/2, y );
  c.lineTo( -bodyW/2, y + bodyH*0.02);
  c.closePath();
  c.fillStyle='#3a86ff';
  c.fill();

  // –∫—Ä—ã—à–∫–∞ (–¥–≤–∞ —Ç–æ–Ω–∞)
  c.globalAlpha=alpha*0.95;
  c.fillStyle='#0e3e9b';
  c.beginPath(); rr(c, -neckW*0.46, neckTopY-capH, neckW*0.92, capH*0.65, capH*0.2); c.fill();
  c.fillStyle='#1655cf';
  c.beginPath(); rr(c, -neckW*0.42, neckTopY-capH*0.92, neckW*0.84, capH*0.28, capH*0.14); c.fill();

  // –º–∞–ª–µ–Ω—å–∫–∏–µ —Ç—ë–º–Ω—ã–µ ¬´–º–µ—Ç–∫–∏¬ª –ø–æ –±–æ–∫–∞–º –≥–æ—Ä–ª—ã—à–∫–∞ (–∫–∞–∫ –Ω–∞ —Ä–µ—Ñ–µ)
  c.globalAlpha=alpha*0.95;
  c.fillStyle='#0e3e9b';
  const mW=neckW*0.12, mH=neckH*0.28;
  c.beginPath(); rr(c,  neckW*0.6-mW, neckTopY+mH*0.1, mW, mH, mW*0.25); c.fill();
  c.beginPath(); rr(c, -neckW*0.6,    neckTopY+mH*0.1, mW, mH, mW*0.25); c.fill();

  // –¥–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–µ –±–µ–ª—ã–µ –ø–æ–ª–æ—Å—ã-–±–ª–∏–∫–∏ (–∫–∞–∫ –Ω–∞ —Å–∫—Ä–∏–Ω–µ)
  c.globalAlpha=alpha*0.75;
  c.save();
  c.rotate(-0.06);
  c.fillStyle='#ffffff';
  const sW=bodyW*0.14, sH=bodyH*0.42, rad=sW*0.4;
  c.beginPath(); rr(c, x+bodyW*0.10, y+bodyH*0.10, sW, sH, rad); c.fill();
  c.globalAlpha=alpha*0.55;
  c.beginPath(); rr(c, x+bodyW*0.28, y+bodyH*0.04, sW*0.85, sH*0.35, rad*0.8); c.fill();
  c.restore();

  c.restore();
  return cn;
}

/* –∏—Å–ø–æ–ª—å–∑—É–π –Ω–æ–≤—ã–π —Å–ø—Ä–∞–π—Ç */
const SPR = bottleSpriteFS(124, 0.085);
</script>
    class Bottle{
      constructor(resetTop=true){ this.reset(resetTop); }
      reset(fromTop){
        this.s = 0.7 + Math.random()*0.9;
        this.x = Math.random()*W;
        this.y = fromTop ? -Math.random()*H*0.8 - SPR.height*this.s : -SPR.height*this.s;
        this.vy = 0.85 + Math.random()*1.35;  // —Å–∫–æ—Ä–æ—Å—Ç—å –ø–∞–¥–µ–Ω–∏—è
        this.vx = (Math.random()-.5)*0.22;    // –ª—ë–≥–∫–∏–π –¥—Ä–µ–π—Ñ
        this.r  = Math.random()*6.28;
        this.vr = (Math.random()-.5)*0.012;
      }
      step(){
        this.x += this.vx;
        this.y += this.vy;
        this.r += this.vr;
        if(this.x < -60) this.x = W+60;
        if(this.x > W+60) this.x = -60;
        if(this.y > H + 70) this.reset(true); // –±–µ–∑ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è
      }
      draw(){
        const w=SPR.width*this.s, h=SPR.height*this.s;
        ctx.save(); ctx.translate(this.x, this.y); ctx.rotate(this.r);
        ctx.drawImage(SPR, -w/2, -h/2, w, h);
        ctx.restore();
      }
    }

    function seed(){
      const count = Math.round((W*H)/12000) + 24; // –ø–ª–æ—Ç–Ω–æ—Å—Ç—å
      items = Array.from({length:count}, () => new Bottle(true));
    }

    function frame(){
      ctx.clearRect(0,0,W,H);
      for(const b of items){ b.step(); b.draw(); }
      if(running) requestAnimationFrame(frame);
    }

    const io=new IntersectionObserver((entries)=>{
      if(entries[0].isIntersecting){ running=true; resize(); frame(); }
      else { running=false; }
    },{threshold:.2});
    io.observe(section);

    addEventListener('resize', ()=> running && resize(), {passive:true});
  }catch(err){
    console.error('Bottle canvas disabled:', err);
  }
})();
</script>

<script>
/* —Ç–æ—á–∫–∏ –Ω–∞ —Ç—Ä—É–±–µ ‚Äî –ø–æ–ø–∞–ø */
(function(){
  const wrap=document.querySelector('.pipe-wrap'); if(!wrap)return;
  const info=document.getElementById('stageInfo'); const title=document.getElementById('stageTitle'); const text=document.getElementById('stageText');
  wrap.addEventListener('click',(e)=>{const dot=e.target.closest('.stage-dot'); if(!dot){info.hidden=true;return;} title.textContent=dot.dataset.title||''; text.textContent=dot.dataset.text||''; info.hidden=false; const x=dot.style.getPropertyValue('--x'); const y=dot.style.getPropertyValue('--y'); info.style.left=x; info.style.top=y; wrap.querySelectorAll('.stage-dot').forEach(d=>d.classList.remove('active')); dot.classList.add('active');});
})();
</script>
</body>
</html>
